## java中的堆和栈
java是在jvm虚拟出的内存环境中运行的， 内存分为栈（stack）和堆（heap）
### 栈
1. 多数计算机语言用栈数据结构记录函数调用的次序和相关变量
2. java中 jvm中的栈记录了线程的方法调用，每个线程拥有一个栈，在线程的运行过程中，如果有新的方法调用，该线程对应的栈就会增加一个存储单元，也即是帧（frame），frame中保存该方法调用的参数、局部变量和返回地址。
3. java的参数和局部变量只能是剧本类型的变量（比如int），或者是对象的引用（reference）。因此在栈中只保存基本类型的变量和对象引用，至于引用所指向的对象保存在堆中（引用可以指向null，不指向任何对象）
    - 对象引用和引用所指向的对象:`Demo demo = new Demo();`，其中 `Demo demo`就是新创建的声明的对象引用，它存放在栈中，` = `就是将声明的对象引用指向`new Demo()`新创建的对象，这个对象存放在堆中
4. 当被调用的方法运行结束时，该方法对应的帧被删除，参数和局部变量占据的空间也被释放，线程回到原方法继续执行。所有的栈被清空时，程序结束。

### 堆
堆是jvm中一块可以自由分配而给对象的区域，java的普通对象存在于堆中。java自带的垃圾回收机制可以自动清空堆中不再使用的对象，不需要手动的去释放内存，就可以避免一些指针和内存泄漏的相关的bug，另一方面，辣鸡回收需要耗费更多的计算时间。